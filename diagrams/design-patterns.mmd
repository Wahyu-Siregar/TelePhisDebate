flowchart LR
  Triage[Rule-Based Triage]
  Router[Single-Shot LLM\n(LLM as Router)]
  MAD[Multi-Agent Debate\n(Orchestration)]
  Agents[Agents x3\n(Parallelization)]
  Reflect[Round 2 Deliberation\n(Reflect & Critique)]
  Aggregator[Voting Aggregator]
  Actions[Actions]

  Triage -->|risk signal| Router
  Router -->|final decision| Actions
  Router -->|escalate when ambiguous| MAD

  MAD -->|round 1 analyze (parallel)| Agents
  Agents -->|share arguments| Reflect
  Reflect -->|revise stance| Agents
  Agents -->|votes| Aggregator
  Aggregator -->|final decision| Actions

  NoteRouter[Pattern: LLM-as-router]
  NoteAgents[Pattern: parallelization]
  NoteReflect[Pattern: reflect-and-critique]
  NoteMAD[Pattern: multi-agent orchestration]

  NoteRouter -.-> Router
  NoteAgents -.-> Agents
  NoteReflect -.-> Reflect
  NoteMAD -.-> MAD
